(function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s="ffb4")})({"88c2":function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){e["copy"]="copy",e["setup"]="setup",e["about"]="about"}(i||(i={}))},ffb4:function(e,t,n){"use strict";n.r(t);var i=n("88c2");const o=figma.currentPage,a=o.selection,r=figma.root;function l(){switch(figma.ui.onmessage=u,figma.command){case"copyPrototypeLink":return c(i["a"].copy);case"settings":return c(i["a"].setup);case"about":return c(i["a"].about)}figma.closePlugin("ERROR: Unknown command")}function c(e){const t=f(),n=m(d());if(!n||!n.length)return figma.closePlugin("ERROR: Could not get the link item");t.fileId||e!==i["a"].copy||(e=i["a"].setup);const o={action:e,nodes:n,configParams:t,fileName:r.name};switch(e){case i["a"].setup:figma.showUI(__html__,{width:295,height:350}),s(o);break;case i["a"].about:figma.showUI(__html__,{width:320,height:480}),s(o);break;case i["a"].copy:figma.showUI(__html__,{width:0,height:0}),s(o);break}}function u(e){var t;const n=m(d());if("message"===e.type&&e.message)figma.notify(e.message||"");else if("cancel"!==e.type)if("save-config"!==e.type)if("links-copied"!==e.type)figma.closePlugin();else{let e;if(n.length)if(1===n.length){const i=((null===(t=n[0])||void 0===t?void 0:t.name)||"").trim();e=i?`Prototype link of '${i}' copied to clipboard`:"Prototype link copied to clipboard"}else e=`Prototype links copied to clipboard (${n.length})`;else e="There are no nodes selected to generate the link";figma.closePlugin(e)}else g(e.payload);else figma.closePlugin()}function s(e){figma.ui.postMessage(e,{origin:"*"})}function f(){const e={fileId:"",scaling:void 0,hideUI:void 0};if(e.fileId=r.getPluginData("config.fileId"),e.scaling=r.getPluginData("config.scaling"),e.hideUI=Number(r.getPluginData("config.hideUI"))||0,!e.fileId){const t=r.getPluginData("shareFileId");t&&(e.fileId=t,r.setPluginData("shareFileId",""))}if(!e.scaling){const t=r.getPluginData("urlQueryParamScaling");t&&(e.scaling=t,r.setPluginData("urlQueryParamScaling",""))}return e}function g(e){r.setPluginData("config.fileId",e.fileId),r.setPluginData("config.scaling",e.scaling||""),r.setPluginData("config.hideUI",String(e.hideUI||0))}function d(){let e=[];if(a.length)for(const t of a){const n=p(t),i=Array.from(n.keys());for(let t=i.length-1;t>=0;t--){const o=i[t],a=n.get(o),r=i[t-1],l=n.get(r);if("PAGE"===a.type){l&&"FRAME"===l.type?e.push(l):e.push(a);break}}}else e.push(figma.currentPage);return h(e.filter(e=>e),"id")}function p(e){const t=new Map;if(!e)return t;let n=e;while(n)t.set(n.id,n),n=n.id===r.id?void 0:n.parent;return t}function m(e){return e.map(e=>({id:e.id,name:e.name}))}function h(e,t){return[...new Map(e.map(e=>[e[t],e])).values()]}l()}});
//# sourceMappingURL=index.js.map